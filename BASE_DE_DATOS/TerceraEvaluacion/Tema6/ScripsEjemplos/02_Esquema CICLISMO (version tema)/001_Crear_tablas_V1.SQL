--CREACIÓN ESQUEMA LÓGICO CICLISMO
--VERSIÓN 1. RESTRICCIONES A NIVEL DE COLUMNA (LAS QUE SE PUEDAN)

CREATE TABLE EQUIPO (
NOMEQ    VARCHAR2(25) 
         CONSTRAINT EQUIPO_PK PRIMARY KEY, 
DIRECTOR VARCHAR2(100)
);

CREATE TABLE CICLISTA (
DORSAL NUMBER(3) 
       CONSTRAINT CICLISTA_PK PRIMARY KEY, 
NOMBRE VARCHAR2(30) 
       CONSTRAINT CICLISTA_NOMBRE_VNN NOT NULL, 
EDAD   NUMBER(2), 
NOMEQ  VARCHAR2(25)  
       CONSTRAINT CICLISTA_NOMEQ_VNN NOT NULL
       CONSTRAINT CICLISTA_EQUIPO_FK REFERENCES EQUIPO (NOMEQ)
);

CREATE TABLE ETAPA (
NETAPA   NUMBER(2) 
         CONSTRAINT ETAPA_PK PRIMARY KEY, 
KM       NUMBER(3),
SALIDA   VARCHAR2(35),
LLEGADA  VARCHAR2(35),
DORSAL   NUMBER(3) 
         CONSTRAINT ETAPA_CICLISTA_FK REFERENCES CICLISTA (DORSAL)
);

CREATE TABLE PUERTO (
NOMPUERTO  VARCHAR2(35) 
           CONSTRAINT PUERTO_PK PRIMARY KEY, 
ALTURA     NUMBER(4), 
CATEGORIA  CHAR(1), 
PENDIENTE  NUMBER(3,2), 
NETAPA     NUMBER(2) 
           CONSTRAINT PUERTO_NETAPA_VNN NOT NULL 
           CONSTRAINT PUERTO_ETAPA_FK REFERENCES ETAPA (NETAPA) ON DELETE CASCADE, 
DORSAL     NUMBER(3) 
           CONSTRAINT PUERTO_CICLISTA_FK REFERENCES CICLISTA(DORSAL)
);

CREATE TABLE MAILLOT (
CODIGO CHAR(3) 
       CONSTRAINT MAILLOT_PK PRIMARY KEY, 
TIPO   VARCHAR2(30), 
COLOR  VARCHAR2(20), 
PREMIO NUMBER(7)
);

CREATE TABLE LLEVAR (
NETAPA NUMBER(2) 
       CONSTRAINT LLEVAR_ETAPA_FK REFERENCES ETAPA (NETAPA),
CODIGO CHAR(3) 
       CONSTRAINT LLEVAR_MAILLOT_FK REFERENCES MAILLOT (CODIGO) ON DELETE CASCADE,
DORSAL NUMBER(3) 
       CONSTRAINT LLEVAR_DORSAL_VNN NOT NULL
       CONSTRAINT LLEVAR_CICLISTA_FK REFERENCES CICLISTA (DORSAL),
CONSTRAINT LLEVAR_PK PRIMARY KEY (NETAPA, CODIGO)
);